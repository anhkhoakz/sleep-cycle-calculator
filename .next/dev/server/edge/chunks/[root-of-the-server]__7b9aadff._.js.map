{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/lib/i18n.ts"],"sourcesContent":["// This is the list of supported locales\nexport const locales = [\"en\", \"vi\"] as const;\nexport type Locale = (typeof locales)[number];\n\n// This is the default locale\nexport const defaultLocale: Locale = \"en\";\n\n// This function checks if the locale is supported\nexport function isValidLocale(locale: string): locale is Locale {\n\treturn locales.includes(locale as Locale);\n}\n\n// This function gets the locale from the pathname\nexport function getLocaleFromPathname(pathname: string): Locale {\n\tconst segments = pathname.split(\"/\");\n\tconst locale = segments[1];\n\n\tif (isValidLocale(locale)) {\n\t\treturn locale;\n\t}\n\n\treturn defaultLocale;\n}\n\n// This function creates a localized pathname\nexport function createLocalizedPathname(\n\tpathname: string,\n\tlocale: Locale,\n): string {\n\tconst segments = pathname.split(\"/\");\n\n\t// Remove existing locale if present\n\tif (isValidLocale(segments[1])) {\n\t\tsegments.splice(1, 1);\n\t}\n\n\t// Add new locale\n\tif (locale !== defaultLocale) {\n\t\tsegments.splice(1, 0, locale);\n\t}\n\n\treturn segments.join(\"/\") || \"/\";\n}\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;;;;;;;;;AACjC,MAAM,UAAU;IAAC;IAAM;CAAK;AAI5B,MAAM,gBAAwB;AAG9B,SAAS,cAAc,MAAc;IAC3C,OAAO,QAAQ,QAAQ,CAAC;AACzB;AAGO,SAAS,sBAAsB,QAAgB;IACrD,MAAM,WAAW,SAAS,KAAK,CAAC;IAChC,MAAM,SAAS,QAAQ,CAAC,EAAE;IAE1B,IAAI,cAAc,SAAS;QAC1B,OAAO;IACR;IAEA,OAAO;AACR;AAGO,SAAS,wBACf,QAAgB,EAChB,MAAc;IAEd,MAAM,WAAW,SAAS,KAAK,CAAC;IAEhC,oCAAoC;IACpC,IAAI,cAAc,QAAQ,CAAC,EAAE,GAAG;QAC/B,SAAS,MAAM,CAAC,GAAG;IACpB;IAEA,iBAAiB;IACjB,IAAI,WAAW,eAAe;QAC7B,SAAS,MAAM,CAAC,GAAG,GAAG;IACvB;IAEA,OAAO,SAAS,IAAI,CAAC,QAAQ;AAC9B"}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\";\nimport { defaultLocale, isValidLocale, locales } from \"./src/lib/i18n\";\n\nexport function middleware(request: NextRequest) {\n\tconst pathname = request.nextUrl.pathname;\n\n\t// Check if there is any supported locale in the pathname\n\tconst pathnameIsMissingLocale = locales.every(\n\t\t(locale) =>\n\t\t\t!pathname.startsWith(`/${locale}/`) && pathname !== `/${locale}`,\n\t);\n\n\t// Redirect if there is no locale\n\tif (pathnameIsMissingLocale) {\n\t\t// Get locale from Accept-Language header or use default\n\t\tconst locale = getLocaleFromRequest(request) || defaultLocale;\n\n\t\t// Redirect to the localized path\n\t\tconst newUrl = new URL(`/${locale}${pathname}`, request.url);\n\t\treturn NextResponse.redirect(newUrl);\n\t}\n}\n\nfunction getLocaleFromRequest(request: NextRequest): string | null {\n\tconst acceptLanguage = request.headers.get(\"accept-language\");\n\n\tif (!acceptLanguage) {\n\t\treturn null;\n\t}\n\n\t// Parse Accept-Language header\n\tconst languages = acceptLanguage\n\t\t.split(\",\")\n\t\t.map((lang) => {\n\t\t\tconst [locale, qValue] = lang.trim().split(\";q=\");\n\t\t\treturn {\n\t\t\t\tlocale: locale.split(\"-\")[0], // Extract language code (e.g., 'vi' from 'vi-VN')\n\t\t\t\tquality: qValue ? parseFloat(qValue) : 1.0,\n\t\t\t};\n\t\t})\n\t\t.sort((a, b) => b.quality - a.quality);\n\n\t// Find the first supported locale\n\tfor (const { locale } of languages) {\n\t\tif (isValidLocale(locale)) {\n\t\t\treturn locale;\n\t\t}\n\t}\n\n\treturn null;\n}\n\nexport const config = {\n\tmatcher: [\n\t\t// Skip all internal paths (_next)\n\t\t\"/((?!_next|api|favicon.ico|sw.js|manifest.json|manifest-vi.json|vite.svg).*)\",\n\t],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAEO,SAAS,WAAW,OAAoB;IAC9C,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IAEzC,yDAAyD;IACzD,MAAM,0BAA0B,qIAAO,CAAC,KAAK,CAC5C,CAAC,SACA,CAAC,SAAS,UAAU,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,KAAK,aAAa,CAAC,CAAC,EAAE,QAAQ;IAGlE,iCAAiC;IACjC,IAAI,yBAAyB;QAC5B,wDAAwD;QACxD,MAAM,SAAS,qBAAqB,YAAY,2IAAa;QAE7D,iCAAiC;QACjC,MAAM,SAAS,IAAI,IAAI,CAAC,CAAC,EAAE,SAAS,UAAU,EAAE,QAAQ,GAAG;QAC3D,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC9B;AACD;AAEA,SAAS,qBAAqB,OAAoB;IACjD,MAAM,iBAAiB,QAAQ,OAAO,CAAC,GAAG,CAAC;IAE3C,IAAI,CAAC,gBAAgB;QACpB,OAAO;IACR;IAEA,+BAA+B;IAC/B,MAAM,YAAY,eAChB,KAAK,CAAC,KACN,GAAG,CAAC,CAAC;QACL,MAAM,CAAC,QAAQ,OAAO,GAAG,KAAK,IAAI,GAAG,KAAK,CAAC;QAC3C,OAAO;YACN,QAAQ,OAAO,KAAK,CAAC,IAAI,CAAC,EAAE;YAC5B,SAAS,SAAS,WAAW,UAAU;QACxC;IACD,GACC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,OAAO,GAAG,EAAE,OAAO;IAEtC,kCAAkC;IAClC,KAAK,MAAM,EAAE,MAAM,EAAE,IAAI,UAAW;QACnC,IAAI,IAAA,2IAAa,EAAC,SAAS;YAC1B,OAAO;QACR;IACD;IAEA,OAAO;AACR;AAEO,MAAM,SAAS;IACrB,SAAS;QACR,kCAAkC;QAClC;KACA;AACF"}}]
}